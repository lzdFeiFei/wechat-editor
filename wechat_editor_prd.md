# 微信公众号排版工具 PRD 文档

## 一、产品概述

### 1.1 产品定位
一款简洁、免费、易用的微信公众号文章排版工具，面向个人创作者和小型团队，提供基础而实用的排版功能，无需注册登录即可使用。

### 1.2 目标用户
- 个人公众号运营者
- 自媒体写作者
- 不想为排版工具付费的用户
- 追求简洁高效的创作者

### 1.3 核心价值
- **零成本**：完全免费，无广告干扰
- **零门槛**：打开即用，无需注册
- **高效率**：专注核心功能，操作流畅
- **可定制**：支持保存个人常用样式

### 1.4 产品目标（MVP阶段）
- 完成核心排版功能开发
- 支持一键复制到微信公众号
- 界面简洁直观，学习成本低于5分钟
- 用户能在10分钟内完成一篇文章的排版

---

## 二、功能需求

### 2.1 功能架构

```
微信公众号排版工具
├── 编辑区域
│   ├── 富文本编辑器
│   ├── 实时预览
│   └── 字数统计
├── 样式工具栏
│   ├── 文字样式
│   ├── 段落样式
│   ├── 特殊组件
│   └── 颜色主题
├── 模板中心
│   ├── 预设模板
│   └── 我的模板
└── 工具栏
    ├── 导入文本
    ├── 插入图片
    ├── 保存草稿
    ├── 一键复制
    └── 清空内容
```

### 2.2 详细功能设计

#### 2.2.1 编辑区域

**富文本编辑器**
- 基础功能：文字输入、删除、选中、复制粘贴
- 支持快捷键：Ctrl+B（加粗）、Ctrl+I（斜体）、Ctrl+Z（撤销）
- 支持从 Word/记事本粘贴文本（自动清除格式）
- 自动保存：每30秒自动保存到本地
- 字数统计：实时显示字符数和预计阅读时间

**实时预览**
- 左侧编辑，右侧实时预览最终效果
- 预览区模拟手机屏幕宽度（375px）
- 支持切换预览模式（手机/平板/电脑）

#### 2.2.2 样式工具栏

**文字样式**
- 标题1：22px，加粗，可选颜色，上下边距
- 标题2：20px，加粗，左侧装饰线
- 标题3：18px，加粗
- 正文：15px，行高1.75，两端对齐
- 小字：13px，用于注释说明
- 加粗、斜体、删除线
- 字体颜色选择器（预设8种常用色）
- 背景色高亮（预设6种浅色）

**段落样式**
- 对齐方式：左对齐、居中、右对齐、两端对齐
- 行距：1.5、1.75、2.0
- 段落间距：标准、加大、紧凑
- 首行缩进：开启/关闭（2字符）
- 引用框：左侧竖线 + 灰色背景
- 代码块：等宽字体 + 浅灰背景

**特殊组件**
- 分割线：实线、虚线、点状、波浪线、花式分割线（5种）
- 图片边框：无边框、圆角、阴影、描边（4种）
- 卡片组件：带背景色和圆角的内容块
- 引导关注：底部关注引导图（可自定义文字和二维码）
- 序号列表：自动编号的列表样式（1、2、3 / ①②③）

**颜色主题**
- 预设5套配色方案：
  - 经典黑白：黑色标题 + 深灰正文
  - 科技蓝：蓝色系主题
  - 清新绿：绿色系主题
  - 温暖橙：橙色系主题
  - 优雅紫：紫色系主题
- 支持自定义主色调
- 一键切换全文配色

#### 2.2.3 模板中心

**预设模板**（MVP阶段提供5套）
1. **极简风格**：纯文字，最小化装饰，突出内容
2. **商务风格**：蓝色调，线条分割，专业感
3. **文艺风格**：衬线字体标题，淡雅配色
4. **科技风格**：深色背景块，亮色点缀
5. **活泼风格**：多彩标题，趣味分割线

**我的模板**
- 保存当前样式为自定义模板（最多5个）
- 快速应用已保存的模板
- 重命名和删除模板

#### 2.2.4 工具栏功能

**导入文本**
- 支持粘贴纯文本
- 支持上传 .txt 文件
- 自动识别段落分割

**插入图片**
- 本地上传（支持 jpg、png、gif，单张不超过5MB）
- 图片自动压缩到适合公众号的尺寸（最宽900px）
- 支持拖拽调整图片位置
- 图片说明文字（居中小字）
- 图片样式：宽度100% / 宽度75% / 圆角 / 阴影

**保存草稿**
- 自动保存到浏览器本地存储
- 支持保存多个草稿（最多10篇）
- 草稿列表显示标题和保存时间
- 支持恢复、重命名、删除草稿

**一键复制**
- 点击按钮复制全文 HTML 代码
- 自动适配微信公众号格式要求
- 复制后显示成功提示："已复制，可直接粘贴到公众号后台"
- 提供使用指引（首次使用时）

**清空内容**
- 清空编辑区所有内容
- 二次确认避免误操作

---

## 三、技术方案

### 3.1 技术栈选择

**前端框架**
- React 18 + TypeScript
- 原因：组件化开发，类型安全，社区活跃

**UI 库**
- Tailwind CSS（样式）
- Lucide React（图标）
- 原因：快速开发，样式可控

**富文本编辑器**
- Quill.js
- 原因：轻量、可定制、文档完善、支持模块化扩展

**状态管理**
- React Hooks（useState, useReducer）
- localStorage（本地持久化）
- 原因：MVP 阶段无需复杂状态管理

**其他工具库**
- html2canvas（如需生成图片预览）
- clipboard.js（复制功能）

### 3.2 核心技术实现

#### 3.2.1 样式处理
```javascript
// 所有样式转换为内联样式
function convertToInlineStyles(html) {
  // 解析 HTML
  // 将 class 转换为 style 属性
  // 过滤微信不支持的 CSS 属性
  // 返回纯内联样式的 HTML
}
```

#### 3.2.2 图片处理
```javascript
// 图片压缩和转换
function processImage(file) {
  // 压缩到适当尺寸
  // 可选：转换为 base64 或上传到图床
  // 返回图片 URL
}
```

#### 3.2.3 草稿存储
```javascript
// 使用 localStorage
const draftManager = {
  save: (title, content) => {},
  load: (id) => {},
  list: () => {},
  delete: (id) => {}
}
```

### 3.3 微信公众号兼容性

**支持的样式**
- color（字体颜色）
- font-size（字号）
- font-weight（加粗）
- text-align（对齐）
- line-height（行高）
- padding、margin（内外边距，部分属性）
- background-color（背景色）
- border（边框）
- border-radius（圆角）

**不支持的样式**（需过滤）
- position: fixed / sticky
- float（部分情况）
- z-index
- 自定义字体（@font-face）
- CSS 动画
- 复杂的 transform

**处理策略**
- 所有样式转为内联 style 属性
- 过滤不支持的 CSS 属性
- 使用 table 布局替代某些 flexbox 场景
- 图片使用 img 标签，不使用背景图

---

## 四、界面设计

### 4.1 整体布局

```
┌─────────────────────────────────────────────────────────┐
│  [Logo] 微信公众号排版工具           [草稿] [帮助]      │
├─────────────────────────────────────────────────────────┤
│                                                           │
│  ┌──────────────┐  ┌──────────────────┐  ┌────────────┐│
│  │              │  │                  │  │            ││
│  │  样式工具栏  │  │    编辑区域      │  │  实时预览  ││
│  │              │  │                  │  │            ││
│  │  - 文字样式  │  │  [富文本编辑器]  │  │  [手机视图]││
│  │  - 段落样式  │  │                  │  │            ││
│  │  - 特殊组件  │  │                  │  │            ││
│  │  - 颜色主题  │  │                  │  │            ││
│  │  - 模板库    │  │                  │  │            ││
│  │              │  │                  │  │            ││
│  └──────────────┘  └──────────────────┘  └────────────┘│
│                                                           │
│  ┌─────────────────────────────────────────────────────┐│
│  │ [导入] [插入图片] [保存草稿]  [一键复制] [清空]   ││
│  └─────────────────────────────────────────────────────┘│
└─────────────────────────────────────────────────────────┘
```

### 4.2 交互设计

**样式应用流程**
1. 用户在编辑区选中文本
2. 点击样式工具栏中的样式按钮
3. 样式立即应用，预览区实时更新
4. 支持撤销操作（Ctrl+Z）

**模板应用流程**
1. 用户点击"模板库"
2. 弹出模板选择面板（网格展示）
3. 悬停显示模板预览
4. 点击模板，弹窗确认："应用模板将覆盖当前样式，是否继续？"
5. 确认后应用模板样式

**一键复制流程**
1. 用户点击"一键复制"按钮
2. 系统生成符合微信格式的 HTML
3. 自动复制到剪贴板
4. 显示成功提示（3秒后自动消失）
5. 首次使用显示操作指引："打开微信公众号后台 → 新建图文 → 在编辑区右键粘贴"

### 4.3 视觉设计

**配色方案**
- 主色：#3B82F6（蓝色，用于按钮、链接）
- 辅助色：#10B981（绿色，用于成功提示）
- 背景色：#F9FAFB（浅灰，整体背景）
- 编辑区背景：#FFFFFF（纯白）
- 文字色：#1F2937（深灰，主要文字）/ #6B7280（中灰，次要文字）

**字体**
- 界面字体：-apple-system, 微软雅黑
- 编辑区字体：与公众号一致

**间距规范**
- 大间距：24px（模块间距）
- 中间距：16px（组件间距）
- 小间距：8px（元素间距）

**圆角**
- 按钮：6px
- 卡片：8px
- 面板：12px

---

## 五、用户体验设计

### 5.1 新手引导

**首次打开**
- 显示欢迎弹窗
- 介绍核心功能（3-4张图）
- 提供示例文章可直接体验
- "跳过引导"按钮

**操作提示**
- 工具栏按钮悬停显示功能说明
- 关键操作显示气泡提示（首次使用）
- 帮助中心提供视频教程和文档

### 5.2 操作优化

**快捷键支持**
- Ctrl+B：加粗
- Ctrl+I：斜体
- Ctrl+Z：撤销
- Ctrl+Y：重做
- Ctrl+S：保存草稿
- Ctrl+K：插入链接

**拖拽支持**
- 图片拖拽上传
- 段落拖拽排序（可选功能）

**智能识别**
- 粘贴网址自动转换为链接
- 粘贴多行文本自动分段
- 识别标题格式（# 标记）

### 5.3 错误处理

**常见错误场景**
1. 图片过大：提示"图片超过5MB，请压缩后上传"
2. 复制失败：提示"复制失败，请手动选择内容复制"
3. 浏览器不支持：提示"请使用Chrome、Edge等现代浏览器"
4. 草稿存储已满：提示"草稿数量已达上限，请删除部分草稿"

---

## 六、数据统计

### 6.1 核心指标

**使用指标**
- 日活用户数（DAU）
- 月活用户数（MAU）
- 人均使用时长
- 人均编辑文章数

**功能指标**
- 一键复制成功率
- 模板使用率（各模板使用占比）
- 草稿保存率
- 图片上传成功率

**留存指标**
- 次日留存率
- 7日留存率
- 30日留存率

### 6.2 数据采集（可选）

**隐私优先原则**
- 不收集用户文章内容
- 不收集用户个人信息
- 仅收集匿名使用数据
- 用户可选择关闭数据统计

**采集内容**
- 功能使用次数
- 页面访问量
- 错误日志
- 性能指标（加载时间、响应时间）

---

## 七、开发计划

### 7.1 MVP 版本（v1.0）- 2周

**第一周**
- Day 1-2：搭建项目框架，集成 Quill.js
- Day 3-4：实现基础样式工具栏（文字、段落样式）
- Day 5-7：实现预览功能和样式转换逻辑

**第二周**
- Day 1-2：实现特殊组件（分割线、引用框等）
- Day 3-4：实现模板系统和草稿功能
- Day 5：实现一键复制功能
- Day 6-7：测试和 bug 修复

### 7.2 迭代计划

**v1.1（+1周）**
- 优化图片处理
- 增加更多模板
- 性能优化

**v1.2（+1周）**
- 增加自定义样式保存
- 历史版本对比
- 导出为图片功能

**v2.0（+2周）**
- 协作功能（可选）
- 云端同步（可选）
- 移动端适配

---

## 八、风险与应对

### 8.1 技术风险

**风险：微信公众号样式兼容性**
- 应对：建立测试用例库，覆盖各种样式组合
- 应对：提供"兼容性检查"功能，标注可能有问题的样式

**风险：浏览器兼容性**
- 应对：明确支持的浏览器版本（Chrome 90+, Edge 90+, Safari 14+）
- 应对：在不支持的浏览器显示升级提示

**风险：性能问题（大文章卡顿）**
- 应对：实现虚拟滚动
- 应对：分段渲染
- 应对：优化编辑器配置

### 8.2 产品风险

**风险：用户学习成本高**
- 应对：提供详细的新手引导
- 应对：设计直观的界面
- 应对：提供示例文章

**风险：功能与现有工具差异大，用户不适应**
- 应对：提供从其他工具导入的功能
- 应对：保持常用功能的操作习惯一致

### 8.3 运营风险

**风险：用户增长缓慢**
- 应对：初期通过社交媒体、自媒体社群推广
- 应对：提供优质的使用教程吸引用户
- 应对：通过口碑传播，鼓励用户推荐

---

## 九、成功标准

### 9.1 MVP 阶段目标

**功能完成度**
- ✅ 核心排版功能 100% 可用
- ✅ 一键复制成功率 > 95%
- ✅ 页面加载时间 < 2秒
- ✅ 编辑响应时间 < 100ms

**用户满意度**
- 新手能在 10 分钟内完成一篇文章排版
- 用户反馈的严重 bug 数量 < 3个
- 用户推荐意愿 > 60%

### 9.2 长期目标

**3个月目标**
- MAU > 1000
- 日均排版文章数 > 500
- 用户留存率（7日）> 30%

**6个月目标**
- MAU > 5000
- 在小红书、知乎等平台有 10+ 推荐文章
- 形成核心用户社群

---

## 十、附录

### 10.1 竞品分析

| 功能 | 秀米 | 135编辑器 | 本产品 |
|------|------|-----------|--------|
| 价格 | 部分收费 | 部分收费 | 完全免费 |
| 注册 | 需要 | 需要 | 不需要 |
| 模板数量 | 1000+ | 800+ | 5-10（精选）|
| 操作复杂度 | 中等 | 较复杂 | 简单 |
| 自定义能力 | 强 | 强 | 中等 |
| 学习成本 | 较高 | 高 | 低 |

### 10.2 用户场景示例

**场景1：个人公众号日更**
- 张三每天写一篇公众号文章
- 需求：快速排版，风格统一
- 使用流程：打开工具 → 粘贴文字 → 应用常用模板 → 微调 → 复制发布
- 耗时：5-8分钟

**场景2：偶尔发文的普通用户**
- 李四一个月发2-3篇文章
- 需求：简单美观，不想学习复杂工具
- 使用流程：打开工具 → 粘贴文字 → 选择喜欢的模板 → 复制发布
- 耗时：10-15分钟

**场景3：追求个性化的创作者**
- 王五希望每篇文章都有独特风格
- 需求：自定义样式，保存常用配色
- 使用流程：打开工具 → 粘贴文字 → 自定义调整 → 保存为模板 → 下次复用
- 耗时：首次30分钟，之后10分钟

### 10.3 术语表

- **内联样式**：直接写在 HTML 标签上的 style 属性，如 `<p style="color: red;">文字</p>`
- **富文本编辑器**：支持格式化文本编辑的组件，类似 Word
- **MVP**：Minimum Viable Product，最小可行产品
- **草稿**：未发布的编辑中的文章
- **模板**：预设的样式组合方案

---

## 文档变更记录

| 版本 | 日期 | 修改人 | 修改内容 |
|------|------|--------|----------|
| v1.0 | 2024-12-30 | Claude | 初始版本 |